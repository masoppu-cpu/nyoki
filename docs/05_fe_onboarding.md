# チケット #05: nyoki オンボーディング仕様（6画面・アセット指定・B/Aスライダー・購入/ケアカード・AI相談）

## 0. 全体方針

- 画面数: 6（1 スプラッシュ / 2 タグライン / 3 3ステップ / 4 購入 / 5 ケア / 6 最終CTA）
- 共通UI: 右上「スキップ」（どこからでもホームへ）／左右スワイプ遷移／ドットインジケータで現在位置表示
- 背景アセット指定:
  - 1, 2, 6: 背景に `room-after-nordic` を全面使用
- アクセシビリティ（共通）:
  - 読み上げ順は上から論理的に
  - 押下要素の最小タップ領域 44pt 相当
  - 画像には短い代替テキスト（例:「北欧調のリビング（植物あり）」）

---

## 1. スプラッシュ

- 内容: 中央にアプリ名「nyoki」
- 背景: `room-after-nordic`
- 遷移: 約1秒で自動的に「2 タグライン」へ（またはスワイプ）

---

## 2. タグライン

- 見出し: 「写真一枚で\n理想の植物見つけよう」
- 補足文: 「部屋の写真から相性の良い植物をAIが提案」
- 背景: `room-after-nordic`
- 遷移: スワイプ or 下部「Next」（任意）で「3」へ

---

## 3. 3ステップ説明（③はBefore/After比較スライダー）

- テキスト:
  1. 部屋を撮影
  2. AIが植物を提案
  3. 配置イメージを確認
- ③の見せ方: Before/After比較スライダー
  - 使用アセット: Before = `room-before-nordic` / After = `room-after-nordic`
  - 表示: 同一位置で重ね、中央ハンドルを左右ドラッグで表示割合0–100%を切替
  - 初期値: 50%（半々）
  - ラベル: 左上 Before／右上 After
  - スナップ: 0–10%で0%、90–100%で100%へ軽く吸着
  - ガイド文: スライダー直下に「左右に動かして変化を確認」
  - ジェスチャ衝突回避: ハンドル操作中はページの横スワイプ無効。指を離すと復帰
  - アクセシビリティ: ハンドル＝スライダー（読み上げ例「配置イメージ比較、50パーセント」）
- 遷移: 「4 購入」へ

---

## 4. 機能紹介: 購入（情報カード）

- 目的: 提案結果が比較しやすく、購入リストに追加できることを示す
- 情報カード（1枚）構成（左→右）
  - サムネ（植物の小画像）
  - テキストブロック: タイトル例「サンスベリア」／サブ例「脚付きプランターセット」
  - 右上: 価格（例: ¥5,980〜）
  - 属性バッジ列（最大3）
    - 育てやすさ（3段階表示＋ラベル「かんたん/ふつう/むずかしい」）
    - ペットOK（ラベル必須。オンボではOK例で統一）
    - 価格目安（例: 目安: ¥5,000〜）
  - 右端アクション: 「購入リストに追加」（押すと一時的に「追加済み」表示）
- 遷移: 「5 ケア」へ

---

## 5. 機能紹介: ケア（2要素）

画面内に A: ケア・タスクカード（コンパクト）と B: 植物カード（AI相談ボタン付）をこの順で縦に表示。

### A) ケア・タスクカード（コンパクト）

- 目的: 日々の管理を一目で想起させる
- 表示例: 「水やり　30分」
- 構成（左→右）
  - 左縦ライン（カテゴリー色の帯）
  - テキストブロック: タイトル「水やり」（太字）＋「30分」（小さめ。並記でも右寄せでも可）
  - 円形アイコンバッジ（ジョウロ等）
  - 最右: 完了トグル（空○／✓ 切替）
- ふるまい: トグルで未完⇄完了／カード本体は軽い押下感のみ

### B) 植物カード（AI相談ボタン付き）

- 目的: 各植物からすぐ相談できる体験を提示
- 構成（左→右）
  - サムネ（小さめ鉢）
  - テキスト: タイトル例「モンステラ」＋補助1行（例「明るい日陰OK・週1目安」）
  - 右側: 「AI相談」ボタン（小さなピル型）／隣に円形アイコンバッジ（任意）／最右トグル（任意）
- AI相談ボタン押下時: 下からチャットシートを表示（高さ80%、背景暗転）
  - ヘッダー: 「AI相談」／右上「閉じる」
  - メッセージ例（2往復・ダミー）
    - ユーザー: 「葉が黄色くなってきた」
    - AI: 「土の表面から3–4cmが乾いているか確認してみて。乾いていたら給水、湿っていれば数日控えるのが◎。置き場所は明るい日陰がベター。」
  - 入力欄: プレースホルダのみ（入力不可でOK）
  - クイックチップ: 「水やり頻度を知りたい」／「置き場所はどこがいい？」／「冬の管理のコツ」
  - モーダル操作中はページ横スワイプ無効。閉じるとフォーカスをAI相談ボタンへ戻す
- 遷移: 「6 最終CTA」へ

---

## 6. 最終CTA

- 見出し: 「写真一枚で\n理想の植物見つけよう」（タグライン再掲）
- 背景: `room-after-nordic`
- ボタン: 「始める」（ホームへ）／「ログイン」（認証→完了後ホーム）

---

## 遷移まとめ（矢印）

1 スプラッシュ（bg=after）
→ 2 タグライン（bg=after）
→ 3 3ステップ（③は B/Aスライダー: before×after）
→ 4 購入（情報カード: 育てやすさ・ペットOK・価格）
→ 5 ケア（タスクカード: 水やり30分 ＋ 植物カード: AI相談→チャット）
→ 6 最終CTA（bg=after: 始める/ログイン）
※ どの画面からでも右上「スキップ」でホーム。

---

## QAチェックリスト（受け入れ条件）

- [ ] 1/2/6 の背景が `room-after-nordic` になっている
- [ ] 3 の ③ が B/A比較スライダー（初期50%、端でスナップ、操作中はページスワイプ無効）
- [ ] 4 に 情報カードが1枚あり、育てやすさ／ペットOK／価格が読める
- [ ] 5-A に 「水やり 30分」のコンパクトタスクカードがあり、トグルが動く
- [ ] 5-B に 植物カードがあり、AI相談ボタン押下でチャットシートが開き、サンプル会話が見える
- [ ] すべての押下要素が 44pt 以上、読み上げ順が論理的
- [ ] 横スワイプ・ドット・スキップの全体フローが維持されている


## スタイル

```typescript
const styles = StyleSheet.create({
  container: {
    flex: 1,
    backgroundColor: '#FFFFFF'
  },
  slide: {
    flex: 1,
    alignItems: 'center',
    justifyContent: 'center',
    paddingHorizontal: 40
  },
  image: {
    width: 250,
    height: 250,
    marginBottom: 40
  },
  title: {
    fontSize: 24,
    fontWeight: 'bold',
    marginBottom: 16,
    color: '#2D3748'
  },
  description: {
    fontSize: 16,
    textAlign: 'center',
    color: '#718096'
  },
  footer: {
    flexDirection: 'row',
    justifyContent: 'space-between',
    alignItems: 'center',
    paddingHorizontal: 20,
    paddingVertical: 20
  },
  dots: {
    flexDirection: 'row'
  },
  dot: {
    width: 8,
    height: 8,
    borderRadius: 4,
    backgroundColor: '#CBD5E0',
    marginHorizontal: 4
  },
  activeDot: {
    backgroundColor: '#48BB78',
    width: 20
  },
  nextButton: {
    backgroundColor: '#48BB78',
    paddingHorizontal: 20,
    paddingVertical: 10,
    borderRadius: 8
  },
  nextText: {
    color: '#FFFFFF',
    fontWeight: '600'
  },
  skipText: {
    color: '#718096'
  }
});
```

## Expo Goでの動作確認手順

```bash
# 1. 開発サーバー起動
npm start

# 2. Expo Goアプリでスキャン
# iOS: カメラアプリでQRコード読み取り
# Android: Expo GoアプリでQRコードスキャン

# 3. 確認項目
- [ ] オンボーディング画面が表示される
- [ ] スワイプで画面遷移できる
- [ ] スキップボタンが動作する
- [ ] 完了後、ホーム画面に遷移する
- [ ] 2回目起動時はオンボーディングが表示されない
```

## 完了条件
- [x] 5枚のスライド実装（フリーミアム案内含む） ✅ 2025-01-29
- [x] スワイプ操作対応 ✅ 2025-01-29
- [x] ドットインジケーター実装 ✅ 2025-01-29
- [x] スキップ・次へボタン実装 ✅ 2025-01-29
- [x] 初回起動判定実装 ✅ 2025-01-29
- [x] アニメーション実装 ✅ 2025-01-29
- [x] Expo Goでの動作確認完了 ✅ 2025-01-29

## 備考
- 画像アセットは後で追加
- アクセシビリティ対応も考慮
- 国際化対応の準備

## 関連ファイル
- `src/screens/OnboardingScreen.tsx` - オンボーディング画面（要作成）
- `assets/images/onboarding-*.png` - オンボーディング画像（要作成）

最終更新: 2025-08-28

## Auto-PR（Claude用）

目的:
- オンボーディング画面の最小実装を追加しPR作成

ブランチ:
- feat/<TICKET-ID>-onboarding

コミット規約:
- [<TICKET-ID>] で始める

動作確認（最低限）:
- [ ] 5枚スライドが動作
- [ ] 初回起動判定が機能

実行手順（Claude）:
```bash
git switch -c feat/<TICKET-ID>-onboarding
git add -A && git commit -m "[<TICKET-ID}] add onboarding slides"
git push -u origin feat/<TICKET-ID>-onboarding
gh pr create --fill --base main --head feat/<TICKET-ID>-onboarding
```
