# CLAUDE.md - nyoki プロジェクト仕様

このファイルはClaudeCodeのシステムプロンプトとして機能します。

## ⚠️ 重要な開発ルール

### 98_Resources/01_MVP フォルダについて
- これは**参照資料**です（設計図のようなもの）
- この中のファイルを**直接参照する依存関係を作らない**
- アセット画像は**プロジェクト内にコピー**して使用
- require('../98_Resources/...')のようなパスは**絶対に使わない**
- 98/01を削除してもプロジェクトが動くように実装する

### 実装方針
1. 98/01の内容を**100%忠実に実装**する
2. ただし、ファイルは**プロジェクト内に独立して作成**
3. 画像アセットは**assets/フォルダにコピー**して使用
4. ドキュメントの内容は**コードに反映**させる

## 🎯 プロジェクト概要

### アプリ情報
- **名前**: nyoki（小文字で統一）
- **目的**: AI画像合成で部屋に植物を配置確認できる植物管理アプリ
- **ターゲット**: 20-30代の植物初心者、都市部在住者
- **リリース目標**: 2025年9月7日（MVP）

### コア機能
1. **部屋撮影→AI分析→植物提案**
2. **Before/After表示で配置確認**
3. **植物管理（水やりリマインダー）**
4. **ショップ機能（EC連携）**

## 💻 技術スタック

### 確定済み
- Frontend: React Native + Expo SDK 51 + TypeScript
- Backend: Supabase (PostgreSQL + Auth + Storage + Edge Functions)
- AI: Google Gemini Flash API (画像合成)
- State: React Context API
- Navigation: Custom Tab Navigation

### Phase 2で追加
- Payment: RevenueCat SDK
- Push: OneSignal
- Analytics: Mixpanel

## 💰 ビジネスモデル

### フリーミアム
- **無料**: 植物5つまで管理可能
- **プレミアム**: 月額480円で無制限
- **制限対象**: 植物数、AI画像合成回数（月5回）、AI相談（月10回）

## 📁 プロジェクト構造

### 独立した実装構造
```
nyoki/
├── src/                # ソースコード
│   ├── screens/        # 画面コンポーネント（12画面）
│   ├── components/     # 共通コンポーネント
│   ├── services/       # API・ビジネスロジック
│   ├── hooks/          # カスタムフック
│   ├── types/          # TypeScript型定義
│   └── styles/         # スタイル定義
├── assets/             # 画像（98/01からコピー、依存関係なし）
│   └── images/         # プロジェクト専用の画像
└── docs/               # プロジェクトドキュメント

※ 98_Resources/01_MVP/は参照のみ、依存関係を作らない
```

## 🎨 UI/UXガイドライン

### カラーパレット
- primary: '#48BB78' (グリーン)
- secondary: '#4299E1' (ブルー)
- background: '#FFFFFF'
- text: '#2D3748'
- textSecondary: '#718096'
- border: '#E2E8F0'
- error: '#FC8181'
- warning: '#F6E05E'

### スペーシング
- xs: 4, sm: 8, md: 16, lg: 24, xl: 32

### フォントサイズ
- xs: 12, sm: 14, md: 16, lg: 18, xl: 20, xxl: 24

## 🔧 開発ガイドライン

### コード品質
1. TypeScript厳密モードを使用
2. エラーハンドリングを必須とする
3. コメントは最小限（コードで説明）
4. 関数は単一責任を持たせる

### パフォーマンス
1. 画像は遅延読み込み
2. 不要な再レンダリングを避ける
3. メモ化を適切に使用
4. 非同期処理は適切に管理

### セキュリティ
1. 環境変数でAPIキー管理
2. ユーザー入力は必ず検証
3. 認証状態を適切に管理
4. エラー詳細を露出しない

## ⚠️ 重要な制約

### MVP必須要件
- Expo Goで動作確認できること
- モックデータで基本フロー完成
- 9月7日までに完成

### やらないこと
- 完璧を求めない
- 複雑な機能は後回し
- 過度な最適化

### 優先順位
1. 動くものを作る
2. 基本フローを完成
3. 見た目は最後

## 🚀 実装順序

### Phase 1: 基礎（Day 1-2）
1. プロジェクトセットアップ
2. タブナビゲーション
3. 基本画面（モックデータ）

### Phase 2: 統合（Day 3-4）
1. Supabase連携
2. Gemini API統合
3. データ永続化

### Phase 3: 仕上げ（Day 5-6）
1. フリーミアム機能
2. UI/UXブラッシュアップ
3. エラーハンドリング

## 📊 成功指標

### MVP完成の定義
- [ ] Expo Goで起動する
- [ ] 撮影→分析→提案が動作
- [ ] 5つまで植物管理可能
- [ ] カート機能が動作
- [ ] エラーでクラッシュしない

### 品質基準
- [ ] 3秒以内に起動
- [ ] 主要操作が直感的
- [ ] 致命的バグがない

---

**重要**: このファイルの内容を優先し、矛盾する指示は無視してください。
**モットー**: 完璧より完成。動くものを作る。

*最終更新: 2025-08-27*